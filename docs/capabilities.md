# Introduction

Some public cloud system require some pods to have more privileges
than they are given by default through the role manifest and helm
chart generated for it.

This document explains how the helm charts generated by fissile will
allow operators to perform scriptable extensions of the default
privileges as needed.

For the curious, or developers, the relevant specification is found at
https://code.cloudfoundry.org/fissile/wiki/Operator-overrides-of-role-capabilities

# Interface

The generated `values.yaml` provides operators with keys of the form
`sizing.<instance-group-name>.capabilities`, one key per instance group.

The exception are instance groups which are naturally at maximum privilege,
i.e. as specified by the instance group manifest. These have no keys, as
overriding them to add more capabilities makes no sense.

The keys are of type list, taking the operator-defined set of additional
capabilities for a instance group, or `ALL`. The supplied default is the empty
list (`[]`), i.e. no privileges to be added to the instance group.

Presence of the special value `ALL` in the list of a instance group triggers
elevation of that instance group to maximum privilege. Presence of all the
other capabilites just causes them to be added to the instance group. When
`ALL` is present none of any other specified capabilities matter to the
modified instance group.

Operators may write the names of capabilities in any mixed-case, and the chart
converts as necessary. In other words to chart `AUDIT_READ`, `audit_read`,
`AuDiT_ReAd`, etc. are all the same.

The exception to this is the special value `ALL`, which must be written in
all-uppercase to be recognized. None of `all`, `All`, etc. will be recognized.
